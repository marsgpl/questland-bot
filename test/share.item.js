//

const send = require("./lib/send")

let sleep = function(ms) {
    return new Promise((resolve, reject) => {
        setTimeout(resolve, ms)
    })
}

let brute = async function() {
    let req_id = 1000

    for ( let id=1538; id<9999; ++id ) {
        let json = await send({
            url: "/guild/sharechatitem/",
            body: {
                tpl_id: id,
                source: "eternal_chest",
                amount: 1,
                req_id,
            },
        })

        req_id++

        if ( json && json.data && json.data.chat_sendmessage_status == "ok" ) {
            console.log("GOOD: " + id)
        } else {
            //process.stdout.write(id + " ")

            if ( !(id%100) ) {
                //process.stdout.write("\n")
                console.log(json)
            }

            if ( !json || json.status == "ok" && json.message && json.message.match(/handled already/g) > -1 ) {
                //process.stdout.write("\n")
                console.log(json)
                process.exit(1)
            }

            if ( json.status == "ok" ) {}
            else if ( json.status == "error" && json.message.match(/Not found/g) > -1 ) {}
        }

        await sleep(60)
    }
}

brute()

GOOD: 357
GOOD: 358
GOOD: 361
GOOD: 362
GOOD: 518
GOOD: 522
GOOD: 583
GOOD: 587
GOOD: 591
GOOD: 1097
GOOD: 1098
GOOD: 1099
GOOD: 1100
GOOD: 1101
GOOD: 1102
GOOD: 1103
GOOD: 1104
GOOD: 1105
GOOD: 1106
GOOD: 1107
GOOD: 1108
GOOD: 1109
GOOD: 1110
GOOD: 1111
GOOD: 1112
GOOD: 1113
GOOD: 1114
GOOD: 1229
GOOD: 1230
GOOD: 1231
GOOD: 1232
GOOD: 1233
GOOD: 1234
GOOD: 1235
GOOD: 1236
GOOD: 1237
GOOD: 1258
GOOD: 1259
GOOD: 1260
GOOD: 1261
GOOD: 1262
GOOD: 1263
GOOD: 1264
GOOD: 1265
GOOD: 1266
GOOD: 1267
GOOD: 1268
GOOD: 1269
GOOD: 1270
GOOD: 1271
GOOD: 1272
GOOD: 1273
GOOD: 1274
GOOD: 1275
GOOD: 1276
GOOD: 1277
GOOD: 1278
GOOD: 1279
GOOD: 1280
GOOD: 1281
GOOD: 1282
GOOD: 1283
GOOD: 1284
GOOD: 1285
GOOD: 1286
GOOD: 1287
GOOD: 1288
GOOD: 1289
GOOD: 1290
GOOD: 1291
GOOD: 1292
GOOD: 1293
GOOD: 1310
GOOD: 1311
GOOD: 1312
GOOD: 1313
GOOD: 1314
GOOD: 1315
GOOD: 1316
GOOD: 1317
GOOD: 1318
GOOD: 1319
GOOD: 1320
GOOD: 1321
GOOD: 1326
GOOD: 1327
GOOD: 1328
GOOD: 1419
GOOD: 1421
GOOD: 1423
GOOD: 1431
GOOD: 1433
GOOD: 1435
GOOD: 1437
GOOD: 1439
GOOD: 1441
GOOD: 1443
GOOD: 1445
GOOD: 1447
GOOD: 1449
GOOD: 1451
GOOD: 1453
GOOD: 1455
GOOD: 1457
GOOD: 1459
GOOD: 1461
GOOD: 1463
GOOD: 1465
GOOD: 1467
GOOD: 1469
GOOD: 1471
GOOD: 1507
GOOD: 1511
GOOD: 1515
GOOD: 1519
GOOD: 1523
GOOD: 1527
GOOD: 1531
GOOD: 1535
GOOD: 1539
GOOD: 1543
GOOD: 1545
GOOD: 1547
GOOD: 1549
GOOD: 1551
GOOD: 1553
GOOD: 1555
GOOD: 1557
GOOD: 1559
GOOD: 1561
GOOD: 1563
GOOD: 1567
GOOD: 1571
GOOD: 1575
GOOD: 1579
GOOD: 1583
GOOD: 1587
GOOD: 1591
GOOD: 1595
GOOD: 1599
GOOD: 1647
GOOD: 1667
GOOD: 1669
GOOD: 1671
GOOD: 1683
GOOD: 1687
GOOD: 1691
GOOD: 1693
GOOD: 1695
GOOD: 1697
GOOD: 1705
GOOD: 1709
GOOD: 1713
GOOD: 1717
GOOD: 1721
GOOD: 1725
GOOD: 1729
GOOD: 1733
GOOD: 1737
GOOD: 1741
GOOD: 1745
GOOD: 1749
GOOD: 1753
GOOD: 1757
GOOD: 1761
GOOD: 1765
GOOD: 1769
GOOD: 1773
GOOD: 1777
GOOD: 1781
GOOD: 1785
GOOD: 1789
GOOD: 1793
GOOD: 1797
GOOD: 1805
GOOD: 1807
GOOD: 1809
GOOD: 1811
GOOD: 1813
GOOD: 1815
GOOD: 1817
GOOD: 1819
GOOD: 1821
GOOD: 1823
GOOD: 1825
GOOD: 1827
GOOD: 1883
GOOD: 2025
GOOD: 2027
GOOD: 2029
GOOD: 2181
GOOD: 2185
GOOD: 2189
GOOD: 2193
GOOD: 2197
GOOD: 2201
GOOD: 2205
GOOD: 2209
GOOD: 2213
GOOD: 2217
GOOD: 2221
GOOD: 2225
GOOD: 2229
GOOD: 2233
GOOD: 2237
GOOD: 2241
GOOD: 2245
GOOD: 2249
GOOD: 2253
GOOD: 2255
GOOD: 2257
GOOD: 2259
GOOD: 2261
GOOD: 2263
GOOD: 2265
GOOD: 2267
GOOD: 2269
GOOD: 2271
GOOD: 2273
GOOD: 2275
GOOD: 2387
GOOD: 2391
GOOD: 2395
GOOD: 2399
GOOD: 2403
GOOD: 2407
GOOD: 2411
GOOD: 2419
GOOD: 2423
GOOD: 2427
GOOD: 2431
GOOD: 2435
GOOD: 2471
GOOD: 2519
GOOD: 2523
GOOD: 2527
GOOD: 2531
GOOD: 2535
GOOD: 2539
GOOD: 2543
GOOD: 2547
GOOD: 2551
GOOD: 2555
GOOD: 2559
GOOD: 2563
GOOD: 2567
GOOD: 2571
GOOD: 2575
GOOD: 2579
GOOD: 2583
GOOD: 2587
GOOD: 2593
GOOD: 2595
GOOD: 2597
GOOD: 2599
GOOD: 2601
GOOD: 2603
GOOD: 2605
GOOD: 2607
GOOD: 2609
GOOD: 2611
GOOD: 2613
GOOD: 2615
GOOD: 2635
GOOD: 2639
GOOD: 2643
GOOD: 2645
GOOD: 2647
GOOD: 2723
GOOD: 2727
GOOD: 2741
GOOD: 2745
GOOD: 2749
GOOD: 2753
GOOD: 2809
GOOD: 2811
GOOD: 2813
GOOD: 2815
GOOD: 2817
GOOD: 2819
GOOD: 2821
GOOD: 2823
GOOD: 2825
GOOD: 2827
GOOD: 2829
GOOD: 2831
GOOD: 2833
GOOD: 2837
GOOD: 2841
GOOD: 2845
GOOD: 2849
GOOD: 2853
GOOD: 2857
GOOD: 2861
GOOD: 2865
GOOD: 2869
GOOD: 2873
GOOD: 2877
GOOD: 2881
GOOD: 2885
GOOD: 2889
GOOD: 2893
GOOD: 2897
GOOD: 2901
GOOD: 2905
GOOD: 2909
GOOD: 2913
GOOD: 3059
GOOD: 3063
GOOD: 3403
GOOD: 3407
GOOD: 3411
GOOD: 3415
GOOD: 3419
GOOD: 3423
GOOD: 3427
GOOD: 3431
GOOD: 3435
GOOD: 3439
GOOD: 3443
GOOD: 3447
GOOD: 3451
GOOD: 3455
GOOD: 3459
GOOD: 3463
GOOD: 3467
GOOD: 3469
GOOD: 3471
GOOD: 3473
GOOD: 3475
GOOD: 3477
GOOD: 3479
GOOD: 3481
GOOD: 3483
GOOD: 3485
GOOD: 3487
GOOD: 3489
GOOD: 3895
GOOD: 3899
GOOD: 4001
GOOD: 4005
GOOD: 4009
GOOD: 4013
GOOD: 4017
GOOD: 4021
GOOD: 4025
GOOD: 4029
GOOD: 4033
GOOD: 4037
GOOD: 4041
GOOD: 4045
GOOD: 4049
GOOD: 4053
GOOD: 4057
GOOD: 4059
GOOD: 4061
GOOD: 4063
GOOD: 4065
GOOD: 4067
GOOD: 4069
GOOD: 4071
GOOD: 4073
GOOD: 4075
GOOD: 4077
GOOD: 4079
GOOD: 4175
GOOD: 4181
GOOD: 4185
GOOD: 4189
GOOD: 4269
GOOD: 4273
GOOD: 4283
GOOD: 4321
GOOD: 4345
GOOD: 4349
GOOD: 4369
GOOD: 4373
GOOD: 4377
GOOD: 4381
GOOD: 4385
GOOD: 4389
GOOD: 4393
GOOD: 4397
GOOD: 4401
GOOD: 4405
GOOD: 4409
GOOD: 4413
GOOD: 4417
GOOD: 4421
GOOD: 4425
GOOD: 4427
GOOD: 4429
GOOD: 4431
GOOD: 4433
GOOD: 4435
GOOD: 4437
GOOD: 4439
GOOD: 4441
GOOD: 4443
GOOD: 4445
GOOD: 4447
GOOD: 4549
GOOD: 4555
GOOD: 4589
GOOD: 4595
GOOD: 4615
GOOD: 4635
